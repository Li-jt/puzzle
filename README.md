# 拼图游戏项目

## 项目描述

这是一个基于 TypeScript 实现的拼图游戏。用户可以选择一张图片并将其分割成若干个拼图块，通过拖拽拼图块来完成拼图。当拼图完成后，会弹出提示框显示用户完成拼图所用的时间。代码由AI生成。

## 功能特性

- 支持上传任意图片作为拼图源。
- 用户可以自定义拼图的行数和列数。
- 记录拼图开始时间和结束时间，并在拼图完成后显示所用时间。
- 拼图块可以通过鼠标拖拽进行移动，并且支持吸附到正确位置。
- 完成拼图后禁用拖拽功能。

## 技术栈

- **TypeScript**：用于编写强类型的应用代码。
- **HTML5 Canvas**：用于绘制拼图块和处理图像。
- **FileReader API**：用于读取用户上传的图片文件。

## 文件结构

```
src/
 ├── main.ts # 主程序入口文件 
 ├── engine.ts # 引擎类实现 
 └── style.css # 样式文件
```


## 使用方法

1. 打开浏览器并加载项目页面。
2. 点击文件输入框选择一张图片作为拼图源。
3. 在页面上分别输入拼图的行数和列数（默认为3x3）。
4. 开始拖拽拼图块以完成拼图。
5. 当所有拼图块都放置在正确位置时，会弹出提示框显示完成拼图所用的时间。

## 类说明

### PuzzleManager 类

负责处理图片和拼图逻辑，包括创建拼图、打乱拼图块、检查拼图是否完成等。

- **属性**
    - `pieces`: 存储所有的拼图块信息。
    - `pieceWidth`, `pieceHeight`: 单个拼图块的宽度和高度。
    - `cols`, `rows`: 拼图的列数和行数。
    - `startTime`: 记录拼图开始的时间。

- **方法**
    - `createPuzzle(img)`: 创建拼图并初始化拼图块。
    - `shufflePieces()`: 随机打乱拼图块的位置。
    - `checkPuzzleCompletion()`: 检查拼图是否已完成。
    - `drawPuzzle()`: 绘制当前状态下的拼图。

### Puzzle 类

继承自 `Engine` 类，负责管理整个拼图游戏的流程，包括处理用户交互事件（如鼠标点击、拖拽等）。

- **属性**
    - `draggedPiece`: 当前正在拖拽的拼图块。
    - `offsetX`, `offsetY`: 鼠标相对于拼图块左上角的偏移量。
    - `originalX`, `originalY`: 拖拽前拼图块的原始位置。
    - `puzzleManager`: 管理拼图逻辑的对象实例。

- **方法**
    - `handleImageUpload(event)`: 处理用户上传图片事件。
    - `onMouseDown(event)`: 处理鼠标按下事件，开始拖拽拼图块。
    - `onMouseMove(event)`: 处理鼠标移动事件，更新拼图块位置。
    - `onMouseUp()`: 处理鼠标释放事件，结束拖拽并检查拼图是否完成。
    - `disableDragging()`: 禁用拖拽功能。

## 注意事项

- 请确保上传的图片尺寸适合拼图游戏，过大的图片可能导致性能问题。
- 拼图块的数量由行数和列数决定，请合理设置这两个参数以获得最佳体验。

## 未来改进方向

- 增加更多类型的拼图模式（如九宫格、十六宫格等）。
- 添加难度选择功能，允许用户选择不同级别的拼图挑战。
- 支持触摸屏设备上的手势操作，提升移动端用户体验。



