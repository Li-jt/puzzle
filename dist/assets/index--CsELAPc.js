(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(t){if(t.ep)return;t.ep=!0;const l=o(t);fetch(t.href,l)}})();let c,u,r=[],a,f,y=3,m=3,n=null,x=0,p=0,w=0,L=0;function P(){c=document.createElement("canvas"),u=c.getContext("2d"),document.body.appendChild(c);const e=document.createElement("input");e.type="file",e.accept="image/*",e.addEventListener("change",M),document.body.appendChild(e),c.addEventListener("mousedown",I),c.addEventListener("mousemove",O),c.addEventListener("mouseup",X)}function M(e){var i;const o=(i=e.target.files)==null?void 0:i[0];if(o){const t=new FileReader;t.onload=l=>{var g;const d=new Image;d.src=(g=l.target)==null?void 0:g.result,d.onload=()=>{v(d)}},t.readAsDataURL(o)}}function v(e){c.width=e.width,c.height=e.height,a=e.width/y,f=e.height/m,r=[];let s=0;for(let o=0;o<m;o++)for(let i=0;i<y;i++)r.push({index:++s,x:i*a,y:o*f,img:e,sx:i*a,sy:o*f,width:a,height:f});E(),console.log("Pieces after shuffle:",r),h()}function E(){for(let e=r.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[r[e].x,r[s].x]=[r[s].x,r[e].x],[r[e].y,r[s].y]=[r[s].y,r[e].y]}}function h(){u.clearRect(0,0,c.width,c.height),r.forEach(e=>{e!==n&&u.drawImage(e.img,e.sx,e.sy,e.width,e.height,e.x,e.y,e.width,e.height)}),n&&u.drawImage(n.img,n.sx,n.sy,n.width,n.height,n.x,n.y,n.width,n.height)}function I(e){const s=c.getBoundingClientRect(),o=e.clientX-s.left,i=e.clientY-s.top;for(let t of r)if(o>=t.x&&o<=t.x+t.width&&i>=t.y&&i<=t.y+t.height){n=t,x=o-t.x,p=i-t.y,w=t.x,L=t.y;break}}function O(e){if(n){const s=c.getBoundingClientRect(),o=e.clientX-s.left,i=e.clientY-s.top;n.x=o-x,n.y=i-p,h()}}function X(){if(n){const e=Math.round(n.x/a)*a,s=Math.round(n.y/f)*f;let o=r.find(i=>i.x===e&&i.y===s);if(o&&o!==n){[n.x,o.x]=[o.x,w],[n.y,o.y]=[o.y,L];const i=r.indexOf(n),t=r.indexOf(o);[r[i],r[t]]=[r[t],r[i]]}else n.x=e,n.y=s;h(),n=null}}P();
